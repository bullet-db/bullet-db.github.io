<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The full documentation for Bullet - A Real Time Data Query Engine"> 
    <meta name="author" content="Akshai Sarma"> 
    <link rel="canonical" href="https://bullet-db.github.io/"> 
    <link rel="shortcut icon" href="./img/favicon.ico">

    <title>Home - Bullet Docs</title>

    <link href="./css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="./css/base.css" rel="stylesheet">
    <link href="./css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/highlight.css">
        <link href="./css/extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    

    
    
      
    
    
    <style>
        /* Collapse ToC */
        .bs-sidebar .nav .nav {
            display: none;
        }
    </style>
    
</head>

<body class="homepage"  data-spy="scroll" data-target=".bs-sidebar">

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href=".">Bullet Docs<small class="small small-brand-text">v0.5.2</small></a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="active">
                        <a href=".">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quick Start <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="quick-start/spark/">Spark</a>
</li>

                        
                            
<li >
    <a href="quick-start/storm/">Storm</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Backend <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="backend/ingestion/">Getting your data into Bullet</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Storm</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="backend/storm-architecture/">Architecture</a>
</li>

        
            
<li >
    <a href="backend/storm-setup/">Setup</a>
</li>

        
            
<li >
    <a href="backend/storm-performance/">Performance</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Spark</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="backend/spark-architecture/">Architecture</a>
</li>

        
            
<li >
    <a href="backend/spark-setup/">Setup</a>
</li>

        
            
<li >
    <a href="backend/spark-performance/">Performance</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">PubSub <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="pubsub/architecture/">Architecture</a>
</li>

                        
                            
<li >
    <a href="pubsub/kafka/">Kafka</a>
</li>

                        
                            
<li >
    <a href="pubsub/rest/">REST</a>
</li>

                        
                            
<li >
    <a href="pubsub/storm-drpc/">Storm DRPC</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Web Service <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="ws/setup/">Setup</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">API</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="ws/api-json/">JSON</a>
</li>

        
            
<li >
    <a href="ws/api-bql/">BQL</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="ws/examples/">Query Examples</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">UI <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="ui/setup/">Setup</a>
</li>

                        
                            
<li >
    <a href="ui/usage/">Usage</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="releases/">Releases</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="about/contributing/">Contributing</a>
</li>

                        
                            
<li >
    <a href="about/contact/">Contact Us</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fa fa-search"></i> Search
                        </a>
                  </li>
                
                
                    <li class="disabled">
                        <a rel="next" >
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="quick-start/spark/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/bullet-db">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3">

  

<div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="active">
            <a href="#how-is-bullet-useful">How is Bullet useful</a>
            <ul class="nav">
                
                    <li class="second-level">
                        <a href="#example-how-bullet-is-used-at-yahoo">Example: How Bullet is used at Yahoo</a>
                        
                    </li>
            
            </ul>
        </li>
    
        <li class="">
            <a href="#quick-start">Quick Start</a>
            
        </li>
    
        <li class="">
            <a href="#setup-bullet-on-your-streaming-data">Setup Bullet on your streaming data</a>
            
        </li>
    
        <li class="">
            <a href="#querying-in-bullet">Querying in Bullet</a>
            <ul class="nav">
                
                    <li class="second-level">
                        <a href="#termination-conditions">Termination conditions</a>
                        
                    </li>
            
                    <li class="second-level">
                        <a href="#filters">Filters</a>
                        
                    </li>
            
                    <li class="second-level">
                        <a href="#projections">Projections</a>
                        
                    </li>
            
                    <li class="second-level">
                        <a href="#aggregations">Aggregations</a>
                        
                    </li>
            
                    <li class="second-level">
                        <a href="#windows">Windows</a>
                        
                    </li>
            
            </ul>
        </li>
    
        <li class="">
            <a href="#results">Results</a>
            
        </li>
    
        <li class="">
            <a href="#approximate-computation">Approximate computation</a>
            
        </li>
    
        <li class="">
            <a href="#architecture">Architecture</a>
            <ul class="nav">
                
                    <li class="second-level">
                        <a href="#end-to-end-architecture">End-to-End Architecture</a>
                        
                    </li>
            
                    <li class="second-level">
                        <a href="#backend">Backend</a>
                        
                    </li>
            
                    <li class="second-level">
                        <a href="#pubsub">PubSub</a>
                        
                    </li>
            
                    <li class="second-level">
                        <a href="#web-service-and-ui">Web Service and UI</a>
                        
                    </li>
            
            </ul>
        </li>
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<p><img alt="Bullet" src="./../img/bullet-logo.png" /></p>
<ul>
<li>
<p>A real-time query engine for very large data streams</p>
</li>
<li>
<p>NO persistence layer</p>
</li>
<li>
<p>Light-weight, cheap and fast</p>
</li>
<li>
<p>Multi-tenant</p>
</li>
<li>
<p>Pluggable to any data source</p>
</li>
<li>
<p>Provides a UI and Web Service</p>
</li>
<li>
<p>Filter raw data or aggregate data</p>
</li>
<li>
<p>Can be run on storm or spark streaming</p>
</li>
<li>
<p>A look-forward query system - operates on data that arrive after the query is submitted</p>
</li>
<li>
<p>Big-data scale-tested - used in production at Yahoo and tested running 500+ queries simultaneously on up to 2,000,000 rps</p>
</li>
</ul>
<h1 id="how-is-bullet-useful">How is Bullet useful</h1>
<p>How Bullet is used is largely determined by the data source it consumes. Depending on what kind of data you put Bullet on, the types of queries you run on it and your use-cases will change. As a look-forward query system with no persistence, you will not be able to repeat your queries on the same data. The next time you run your query, it will operate on the different data that arrives after that submission. If this usage pattern is what you need and you are looking for a light-weight system that can tap into your streaming data, then Bullet is for you!</p>
<h3 id="example-how-bullet-is-used-at-yahoo">Example: How Bullet is used at Yahoo</h3>
<p>Bullet is used in production internally at Yahoo by having it sit on a subset of raw user engagement events from Yahoo sites and apps. This lets Yahoo developers automatically validate their instrumentation code <em>end-to-end</em> in their Continuous Delivery pipelines. Validating instrumentation is critical since it powers pretty much all decisions and products including machine learning, corporate KPIs, analytics, personalization, targeting.</p>
<p>This instance of Bullet also powers other use-cases such as letting analysts validate assumptions about data, product managers verify launches instantly, debug issues and outages, or simply explore and play around with the data.</p>
<div class="admonition note">
<p class="admonition-title">Blog post</p>
<p>Here is a <a href="https://yahooeng.tumblr.com/post/161855616651/open-sourcing-bullet-yahoos-forward-looking">link to our blog post</a> condensing most of this information if you want to take a look.</p>
</div>
<hr />
<h1 id="quick-start">Quick Start</h1>
<p>See <a href="quick-start/spark/">Quick Start</a> to set up Bullet locally using Spark Streaming. You will generate some synthetic streaming data that you can then query with Bullet.</p>
<h1 id="setup-bullet-on-your-streaming-data">Setup Bullet on your streaming data</h1>
<p>To set up Bullet on a real data stream, you need:</p>
<ol>
<li>To setup the Bullet Backend on a stream processing framework. Currently, we support <a href="backend/storm-setup/">Bullet on Storm</a> and <a href="backend/spark-setup/">Bullet on Spark</a>.<ol>
<li>Plug in your source of data. See <a href="backend/ingestion/">Getting your data into Bullet</a> for details</li>
<li>Consume your data stream</li>
</ol>
</li>
<li>The <a href="ws/setup/">Web Service</a> set up to convey queries and return results back from the backend</li>
<li>To choose a <a href="pubsub/architecture/">PubSub implementation</a> that connects the Web Service and the Backend. We currently support <a href="pubsub/kafka/">Kafka</a> and a <a href="pubsub/rest/">REST PubSub</a> on any Backend and <a href="pubsub/storm-drpc/">Storm DRPC</a> for the Storm Backend.</li>
<li>The optional <a href="ui/setup/">UI</a> set up to talk to your Web Service. You can skip the UI if all your access is programmatic</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Schema in the UI</p>
<p>The UI also needs an endpoint that provides your data schema to help with query building. The Web Service you set up provides a simple file based schema endpoint that you can point the UI to if that is sufficient for your needs.</p>
</div>
<hr />
<h1 id="querying-in-bullet">Querying in Bullet</h1>
<p>Bullet queries allow you to filter, project and aggregate data. You can also specify a window to get incremental results. Bullet lets you fetch raw (the individual data records) as well as aggregated data.</p>
<ul>
<li>
<p>See the <a href="ui/usage/">UI Usage section</a> for using the UI to build Bullet queries. This is the same UI you will build in the Quick Starts.</p>
</li>
<li>
<p>See the API section (<a href="ws/api-json/">JSON</a>, <a href="ws/api-bql/">BQL</a>) for building Bullet API queries</p>
</li>
<li>
<p>For examples using the API, see <a href="ws/examples/">Examples</a>. These are actual albeit cleansed queries sourced from the instance at Yahoo.</p>
</li>
</ul>
<h2 id="termination-conditions">Termination conditions</h2>
<p>A Bullet query terminates and returns whatever has been collected so far when:</p>
<ol>
<li>A maximum duration is reached. In other words, a query runs for a defined time window.</li>
<li>A maximum number of records is reached (only applicable for queries that are fetching raw data records and not aggregating).</li>
</ol>
<h2 id="filters">Filters</h2>
<p>Bullet supports two kinds of filters:</p>
<table>
<thead>
<tr>
<th>Filter Type</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>Logical filter</td>
<td>Allow you to combine filter clauses (Logical or Relational) with logical operations like AND, OR and NOTs</td>
</tr>
<tr>
<td>Relational filters</td>
<td>Allow you to use comparison operations like equals, not equals, greater than, less than, regex like etc, on fields</td>
</tr>
</tbody>
</table>
<h2 id="projections">Projections</h2>
<p>Projections allow you to pull out only the fields needed and rename them when you are querying for raw data records.</p>
<h2 id="aggregations">Aggregations</h2>
<p>Aggregations allow you to perform some operation on the collected records.</p>
<p>The current aggregation types that are supported are:</p>
<table>
<thead>
<tr>
<th>Aggregation</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>GROUP</td>
<td>The resulting output would be a record containing the result of an operation for each unique value combination in your specified fields</td>
</tr>
<tr>
<td>COUNT DISTINCT</td>
<td>Computes the number of distinct elements in the fields. (May be approximate)</td>
</tr>
<tr>
<td>LIMIT or RAW</td>
<td>The resulting output would be at most the number specified in size.</td>
</tr>
<tr>
<td>DISTRIBUTION</td>
<td>Computes distributions of the elements in the field. E.g. Find the median value or various percentile of a field, or get frequency or cumulative frequency distributions</td>
</tr>
<tr>
<td>TOP K</td>
<td>Returns the top K most frequently appearing values in the column</td>
</tr>
</tbody>
</table>
<p>Currently we support <code>GROUP</code> aggregations with the following operations:</p>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>COUNT</td>
<td>Computes the number of the elements in the group</td>
</tr>
<tr>
<td>SUM</td>
<td>Computes the sum of the non-null values in the provided field for all elements in the group</td>
</tr>
<tr>
<td>MIN</td>
<td>Returns the minimum of the non-null values in the provided field for all the elements in the group</td>
</tr>
<tr>
<td>MAX</td>
<td>Returns the maximum of the non-null values in the provided field for all the elements in the group</td>
</tr>
<tr>
<td>AVG</td>
<td>Computes the average of the non-null values in the provided field for all the elements in the group</td>
</tr>
</tbody>
</table>
<h2 id="windows">Windows</h2>
<p>Windows in a Bullet query allow you to specify how often you'd like Bullet to return results.</p>
<p>For example, you could launch a query for 2 minutes, and have Bullet return a COUNT DISTINCT on a particular field every 3 seconds:</p>
<p><img alt="Time-Based Tumbling Windows" src="./../img/time-based-tumbling.png" /></p>
<p>See documentation on the Web Service API for more info.</p>
<h1 id="results">Results</h1>
<p>The Bullet Web Service returns your query result as well as associated metadata information in a structured JSON format. The UI can display the results in different formats.</p>
<hr />
<h1 id="approximate-computation">Approximate computation</h1>
<p>It is often intractable to perform aggregations on an unbounded stream of data and still support arbitrary queries. However, it is possible if an exact answer is not required and the approximate answer's error is exactly quantifiable. There are stochastic algorithms and data structures that let us do this. We use <a href="https://datasketches.github.io/">Data Sketches</a> to perform aggregations such as counting uniques, and will be using Sketches to implement some future aggregations.</p>
<p>Sketches let us be exact in our computation up to configured thresholds and approximate after. The error is very controllable and quantifiable. All Bullet queries that use Sketches return the error bounds with Standard Deviations as part of the results so you can quantify the error exactly. Using Sketches lets us address otherwise hard to solve problems in sub-linear space. We uses Sketches to compute <code>COUNT DISTINCT</code>, <code>GROUP</code>, <code>DISTRIBUTION</code> and <code>TOP K</code> queries.</p>
<p>We also use Sketches as a way to control high cardinality grouping (group by a natural key column or related) and rely on the Sketching data structure to drop excess groups. It is up to you setting up Bullet to determine to set Sketch sizes large or small enough for to satisfy the queries that will be performed on that instance of Bullet.</p>
<h1 id="architecture">Architecture</h1>
<h2 id="end-to-end-architecture">End-to-End Architecture</h2>
<p><img alt="Overall Architecture" src="./img/overallarch-2.png" /></p>
<p>The image above shows how the various pieces of the Bullet interact at a high-level. All these layers are modular and pluggable. You can choose an implementation for the Backend and the PubSub (or create your own). The core of Bullet is abstracted into a <a href="https://github.com/yahoo/bullet-core">library</a> that can be reused to implement the Backend, Web Service and PubSub layers in a platform agnostic manner.</p>
<hr />
<h2 id="backend">Backend</h2>
<p><img alt="High Level Architecture" src="./img/higharch.png" /></p>
<p>The Bullet Backend can be split into three main conceptual sub-systems:</p>
<ol>
<li>Request Processor - receives queries, adds metadata and sends it to the rest of the system</li>
<li>Data Processor - reads data from a input stream, converts it to an unified data format and matches it against queries</li>
<li>Combiner - combines results for different queries, performs final aggregations and returns results</li>
</ol>
<p>The core of Bullet querying is not tied to the Backend and lives in a core library. This allows you implement the flow shown above in any stream processor you like.</p>
<p>Implementations of <a href="backend/storm-architecture/">Bullet on Storm</a> and <a href="backend/spark-architecture/">Bullet on Spark</a> are currently supported.</p>
<h2 id="pubsub">PubSub</h2>
<p>The PubSub is responsible for transmitting queries from the API to the Backend and returning results back from the Backend to the clients. It decouples whatever particular Backend you are using with the API.
We currently support three different PubSub implementations:</p>
<ul>
<li><a href="pubsub/kafka/">Kafka</a></li>
<li><a href="pubsub/rest/">REST</a></li>
<li><a href="pubsub/storm-drpc/">Storm DRPC</a> (only for non-windowed queries)</li>
</ul>
<p>You can also very easily <a href="pubsub/architecture/#implementing-your-own-pubsub">implement your own</a> by defining a few interfaces that we provide.</p>
<h2 id="web-service-and-ui">Web Service and UI</h2>
<p>The rest of the pieces are just the standard other two pieces in a full-stack application:</p>
<ul>
<li>A Web Service that talks to the backend using the PubSub layer</li>
<li>A UI that talks to this Web Service</li>
</ul>
<p>The <a href="ws/examples/">Bullet Web Service</a> is built using <a href="https://projects.spring.io/spring-boot/">Spring Boot</a> in Java and the <a href="ui/usage/">UI</a> is built in <a href="./emberjs.com">Ember</a>.</p>
<p>The Web Service can be deployed as a standalone Java application (a JAR file) or easily rebuilt as a WAR to deploy your favorite servlet container like <a href="http://www.eclipse.org/jetty/">Jetty</a>. The UI is a client-side application that can be served using <a href="http://nodejs.org/">Node.js</a></p>
<div class="admonition note">
<p class="admonition-title">Want to know more?</p>
<p>In practice, the backend is implemented using the basic components that the Stream processing framework provides. See <a href="backend/storm-architecture/">Storm Architecture</a> and <a href="backend/spark-architecture/">Spark Architecture</a> for details.</p>
</div></div>
        
    </div>

    <footer class="col-md-12" >
        <hr />
        <div class="pull-left col-md-6">
            
            
        </div>
        <div class="pull-right col-md-4 text-right">
            <p>
            <small>Bullet is licensed under the <a href='https://github.com/bullet-db/bullet-core/blob/master/LICENSE'>Apache 2 license</a>.<br></small>
            
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
        </div>
    </footer>

    <script src="./js/jquery-1.10.2.min.js"></script>
    <script src="./js/bootstrap-3.0.3.min.js"></script>
    <script src="./js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '.';
    </script>
    <script data-main="./mkdocs/js/search.js" src="./mkdocs/js/require.js"></script>
    <script src="./js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>

<!--
MkDocs version : 0.16.3
Build Date UTC : 2018-07-26 17:18:50
-->
