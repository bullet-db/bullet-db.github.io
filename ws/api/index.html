<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The full documentation for Bullet - A Real Time Data Query Engine"> 
    <meta name="author" content="Akshai Sarma"> 
    <link rel="canonical" href="https://bullet-db.github.io/ws/api/"> 
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>BQL - Bullet Docs</title>

    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    

    
    
      
    
    
    <style>
        /* Collapse ToC */
        .bs-sidebar .nav .nav {
            display: none;
        }
    </style>
    
</head>

<body data-spy="scroll" data-target=".bs-sidebar">

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Bullet Docs<small class="small small-brand-text">v1.0.0</small></a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quick Start <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../quick-start/spark/">Spark</a>
</li>

                        
                            
<li >
    <a href="../../quick-start/storm/">Storm</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Backend <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Data Ingestion</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../backend/ingestion/">Record Container</a>
</li>

        
            
<li >
    <a href="../../backend/dsl/">DSL</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Storm</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../backend/storm-architecture/">Architecture</a>
</li>

        
            
<li >
    <a href="../../backend/storm-setup/">Setup</a>
</li>

        
            
<li >
    <a href="../../backend/storm-performance/">Performance</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Spark</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../backend/spark-architecture/">Architecture</a>
</li>

        
            
<li >
    <a href="../../backend/spark-setup/">Setup</a>
</li>

        
            
<li >
    <a href="../../backend/spark-performance/">Performance</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">PubSub <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../pubsub/architecture/">Architecture</a>
</li>

                        
                            
<li >
    <a href="../../pubsub/kafka/">Kafka</a>
</li>

                        
                            
<li >
    <a href="../../pubsub/rest/">REST</a>
</li>

                        
                            
<li >
    <a href="../../pubsub/pulsar/">Pulsar</a>
</li>

                        
                            
<li >
    <a href="../../pubsub/storm-drpc/">Storm DRPC</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Web Service <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../setup/">Setup</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">API</a>
    <ul class="dropdown-menu">
        
            
<li class="active">
    <a href="./">BQL</a>
</li>

        
            
<li >
    <a href="../examples/">Examples</a>
</li>

        
            
<li >
    <a href="../api-json/">JSON (DEPRECATED)</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">UI <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../ui/setup/">Setup</a>
</li>

                        
                            
<li >
    <a href="../../ui/usage/">Usage</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../releases/">Releases</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../about/contributing/">Contributing</a>
</li>

                        
                            
<li >
    <a href="../../about/contact/">Contact Us</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fa fa-search"></i> Search
                        </a>
                  </li>
                
                
                    <li >
                        <a rel="next" href="../setup/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../examples/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/bullet-db">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3">

  

<div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="active">
            <a href="#bullet-api">Bullet API</a>
            <ul class="nav">
                
                    <li class="second-level">
                        <a href="#overview">Overview</a>
                        
                    </li>
            
                    <li class="second-level">
                        <a href="#statement-syntax">Statement Syntax</a>
                        
                    </li>
            
                    <li class="second-level">
                        <a href="#data-types">Data Types</a>
                        
                    </li>
            
            </ul>
        </li>
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="bullet-api">Bullet API</h1>
<p>This section gives a comprehensive overview of the Web Service API for launching Bullet queries.</p>
<p>For examples of queries, see the <a href="../examples/">examples page</a>.</p>
<p>BQL is the interface that is exposed to users to query Bullet. BQL queries that are received by the Web Service are converted to an underlying querying format before being sent to the backend. This conversion is done in the web service using <a href="../../releases/#bullet-bql">the bullet-bql library</a>.</p>
<h2 id="overview">Overview</h2>
<p>Bullet-BQL provides users with a friendly SQL-like API to submit queries to the Web Service.</p>
<h2 id="statement-syntax">Statement Syntax</h2>
<p><code>query</code> is one of</p>
<pre><code>innerQuery
outerQuery
</code></pre>
<p>where <code>innerQuery</code> is</p>
<pre><code>SELECT select FROM stream
( LATERAL VIEW lateralView )?
( WHERE expression )?
( GROUP BY expressions )?
( HAVING expression )?
( ORDER BY orderBy )?
( WINDOWING window )?
( LIMIT Integer )?
</code></pre>
<p>and <code>outerQuery</code> is</p>
<pre><code>SELECT select FROM ( innerQuery )
( LATERAL VIEW lateralView )?
( WHERE expression )?
( GROUP BY expressions )?
( HAVING expression )?
( ORDER BY orderBy )?
( LIMIT Integer )?
</code></pre>
<p>where <code>select</code> is </p>
<pre><code>DISTINCT? selectItem ( , selectItem )*
</code></pre>
<p>and <code>selectItem</code> is one of</p>
<pre><code>expression ( AS? identifier )?
tableFunction
*
</code></pre>
<p>and <code>expression</code> is one of</p>
<pre><code>valueExpression                                                                         
fieldExpression ( : fieldType )?
subFieldExpression ( : fieldType )?
subSubFieldExpression ( : fieldType )?                                                                         
listExpression                                                                          
expression IS NULL                                                                      
expression IS NOT NULL                                                                  
unaryExpression                                                                         
functionExpression                                                                                                       
expression ( * | / | % ) expression                                  
expression ( + | - ) expression                                      
expression ( &lt; | &lt;= | &gt; | &gt;= ) ( ANY | ALL )? expression         
expression ( = | != ) ( ANY | ALL )? expression
expression NOT? RLIKE ANY? expression
expression NOT? IN expression
expression NOT? IN ( expressions )
expressioon NOT? BETWEEN ( expression, expression )
expression AND expression                                                 
expression XOR expression                                                 
expression OR expression                                                  
( expression )
</code></pre>
<p>and <code>expressions</code> is</p>
<pre><code>expression ( , expression )*
</code></pre>
<p>where <code>valueExpression</code> is one of Null, Boolean, Integer, Long, Float, Double, String, or <code>NOW</code> - a keyword that is converted to the current unix time in milliseconds</p>
<p>and <code>fieldExpression</code> is</p>
<pre><code>identifier
</code></pre>
<p>and <code>subFieldExpression</code> is one of</p>
<pre><code>fieldExpression [ Integer ]
fieldExpression [ String ]
fieldExpression [ expression ]
fieldExpression . identifier
</code></pre>
<p>and <code>subSubFieldExpression</code> is one of</p>
<pre><code>subFieldExpression [ String ]
subFieldExpression [ expression ]
subFieldExpression . identifier
</code></pre>
<p><code>fieldType</code> is one of</p>
<pre><code>primitiveType
LIST [ primitiveType ]
MAP [ primitiveType ]
LIST [ MAP [ primitiveType ] ]
MAP [ MAP [ primitiveType ] ]
</code></pre>
<p>and <code>primitiveType</code> is <code>INTEGER</code>, <code>LONG</code>, <code>FLOAT</code>, <code>DOUBLE</code>, <code>BOOLEAN</code>, or <code>STRING</code></p>
<p>where <code>listExpression</code> is one of</p>
<pre><code>[]
[ expressions ]
</code></pre>
<p><code>unaryExpression</code> is </p>
<pre><code>( NOT | SIZEOF ) ( expression )                                                 with optional parentheses
( ABS | TRIM | LOWER | UPPER ) ( expression )                                   with non-optional parentheses
</code></pre>
<p><code>functionExpression</code> is one of</p>
<pre><code>( SIZEIS | CONTAINSKEY | CONTAINSVALUE | FILTER ) ( expression , expression )
UNIXTIMESTAMP ( expressions? )                                                  zero, one, or two arguments
SUBSTRING ( expressions? )                                                      two or three arguments
( IF | BETWEEN ) ( expressions? )                                               three arguments                         
aggregateExpression                               
CAST ( expression AS primitiveType )
</code></pre>
<p>where <code>aggregateExpression</code> is one of</p>
<pre><code>COUNT ( * )                                                    
( SUM | AVG | MIN | MAX ) ( expression )                                
COUNT ( DISTINCT expression ( , expression )* )                                           
distributionType ( expression, inputMode )                            
TOP ( Integer ( , Integer )?, expression ( , expression )* )
</code></pre>
<p>where <code>distributionType</code> is <code>QUANTILE</code>, <code>FREQ</code>, or <code>CUMFREQ</code></p>
<p>and <code>inputMode</code> is one of</p>
<pre><code>LINEAR, Integer                                                                 evenly spaced
REGION, Number, Number, Number                                                  evenly spaced in a region
MANUAL, Number ( , Number )*                                                    defined points
</code></pre>
<p>and <code>tableFunction</code> is one of</p>
<pre><code>OUTER? EXPLODE ( expression ) AS identifier                                     explode a list to one column
OUTER? EXPLODE ( expression ) AS ( identifier , identifier )                    explode a map to a key and a value column
</code></pre>
<p>and <code>stream</code> is one of</p>
<pre><code>STREAM()                                                                        default time duration will be set from BQLConfig
STREAM( ( Integer | MAX ), TIME )                                               time based duration control
</code></pre>
<p><code>RECORD</code> will be supported in the future.</p>
<p>and <code>lateralView</code> is</p>
<pre><code>tableFunction (LATERAL VIEW tableFunction)*
</code></pre>
<p>and <code>orderBy</code> is </p>
<pre><code>expression ( ASC | DESC )? ( , expression ( ASC | DESC )? )*
</code></pre>
<p>and <code>window</code> is one of </p>
<pre><code>EVERY ( Integer, ( TIME | RECORD ), include )
TUMBLING ( Integer, ( TIME | RECORD ) )
</code></pre>
<p><code>include</code> is one of </p>
<pre><code>ALL
FIRST, Integer, ( TIME | RECORD )
</code></pre>
<h2 id="data-types">Data Types</h2>
<ul>
<li>
<p><strong>Null</strong>: <code>NULL</code>.</p>
</li>
<li>
<p><strong>Boolean</strong>: <code>TRUE</code>, <code>FALSE</code>.</p>
</li>
<li>
<p><strong>Integer</strong>: 32-bit signed two’s complement integer with a minimum value of <code>-2^31</code> and a maximum value of <code>2^31 - 1</code>. Example: <code>65</code>.</p>
</li>
<li>
<p><strong>Long</strong>: 64-bit signed two’s complement integer with a minimum value of <code>-2^63 + 1</code> and a maximum value of <code>2^63 - 1</code>. Example: <code>9223372036854775807</code>, <code>-9223372036854775807</code>.</p>
</li>
<li>
<p><strong>Float</strong>: 32-bit inexact, variable-precision with a minimum value of <code>2^-149</code> and a maximum value of <code>(2-2^-23)·2^127</code>. Example: <code>1.70141183E+38</code>, <code>1.17549435E-38</code>, <code>0.15625</code>.</p>
</li>
<li>
<p><strong>Double</strong>: 64-bit inexact, variable-precision with a minimum value of <code>2^-1074</code> and a maximum value of <code>(2-2^-52)·2^1023</code>. Example: <code>1.7976931348623157E+308</code>, <code>.17976931348623157E+309</code>, <code>4.9E-324</code>.</p>
</li>
<li>
<p><strong>String</strong>: character string which can have escapes. Example: <code>'this is a string'</code>, <code>'this is ''another'' string'</code>.</p>
</li>
<li>
<p><strong>Identifier</strong>: representation of a field. Unquoted identifier must start with a letter or <code>_</code>. Example: <code>column_name</code>, <code>column_name.foo</code>, <code>column_name.foo.bar</code>, <code>column_name[0].bar</code>, or <code>"123column"</code>.</p>
</li>
<li>
<p><strong>All</strong>: representation of all fields. Example: <code>*</code>.</p>
</li>
</ul></div>
        
    </div>

    <footer class="col-md-12" >
        <hr />
        <div class="pull-left col-md-6">
            
            
        </div>
        <div class="pull-right col-md-4 text-right">
            <p>
            <small>Bullet is licensed under the <a href='https://github.com/bullet-db/bullet-core/blob/master/LICENSE'>Apache 2 license</a>.<br></small>
            
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
        </div>
    </footer>

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../..';
    </script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
    <script src="../../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
