<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The full documentation for Bullet - A Real Time Data Query Engine"> 
    <meta name="author" content="Akshai Sarma"> 
    <link rel="canonical" href="https://bullet-db.github.io/pubsub/pulsar/"> 
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Pulsar - Bullet Docs</title>

    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    

    
    
      
    
    
    <style>
        /* Collapse ToC */
        .bs-sidebar .nav .nav {
            display: none;
        }
    </style>
    
</head>

<body data-spy="scroll" data-target=".bs-sidebar">

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Bullet Docs<small class="small small-brand-text">v0.6.1</small></a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quick Start <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../quick-start/spark/">Spark</a>
</li>

                        
                            
<li >
    <a href="../../quick-start/storm/">Storm</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Backend <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Data Ingestion</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../backend/ingestion/">Record Container</a>
</li>

        
            
<li >
    <a href="../../backend/dsl/">DSL</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Storm</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../backend/storm-architecture/">Architecture</a>
</li>

        
            
<li >
    <a href="../../backend/storm-setup/">Setup</a>
</li>

        
            
<li >
    <a href="../../backend/storm-performance/">Performance</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Spark</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../backend/spark-architecture/">Architecture</a>
</li>

        
            
<li >
    <a href="../../backend/spark-setup/">Setup</a>
</li>

        
            
<li >
    <a href="../../backend/spark-performance/">Performance</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">PubSub <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../architecture/">Architecture</a>
</li>

                        
                            
<li >
    <a href="../kafka/">Kafka</a>
</li>

                        
                            
<li >
    <a href="../rest/">REST</a>
</li>

                        
                            
<li class="active">
    <a href="./">Pulsar</a>
</li>

                        
                            
<li >
    <a href="../storm-drpc/">Storm DRPC</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Web Service <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../ws/setup/">Setup</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">API</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../ws/api-bql/">BQL</a>
</li>

        
            
<li >
    <a href="../../ws/api-json/">JSON</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../ws/examples/">Query Examples</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">UI <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../ui/setup/">Setup</a>
</li>

                        
                            
<li >
    <a href="../../ui/usage/">Usage</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../releases/">Releases</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../about/contributing/">Contributing</a>
</li>

                        
                            
<li >
    <a href="../../about/contact/">Contact Us</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fa fa-search"></i> Search
                        </a>
                  </li>
                
                
                    <li >
                        <a rel="next" href="../rest/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../storm-drpc/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/bullet-db">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3">

  

<div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="active">
            <a href="#pulsar-pubsub">Pulsar PubSub</a>
            <ul class="nav">
                
                    <li class="second-level">
                        <a href="#how-does-it-work">How does it work?</a>
                        
                    </li>
            
                    <li class="second-level">
                        <a href="#setup">Setup</a>
                        <ul class="nav">
                        
                            <li class="third-level">
                                <a href="#plug-into-the-backend">Plug into the Backend</a>
                                
                            </li>
                        
                            <li class="third-level">
                                <a href="#plug-into-the-web-service">Plug into the Web Service</a>
                                
                            </li>
                        
                        </ul>
                    </li>
            
                    <li class="second-level">
                        <a href="#passthrough-configuration">Passthrough configuration</a>
                        
                    </li>
            
                    <li class="second-level">
                        <a href="#security">Security</a>
                        
                    </li>
            
            </ul>
        </li>
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="pulsar-pubsub">Pulsar PubSub</h1>
<p>The Pulsar implementation of the Bullet PubSub uses <a href="https://pulsar.apache.org">Apache Pulsar</a> as the backing PubSub messaging queue and can be used with any Backend and Web Service.</p>
<h2 id="how-does-it-work">How does it work?</h2>
<p>Bullet Pulsar requires at least one Pulsar topic for queries and at least one Pulsar topic for results. On the Web Service, the PubSub is used to create publishers and subscribers that write queries and read results. Similarly, on the Backend, the PubSub is used to create publishers and subscribers that read queries and write results. Both queries and results are sent as <a href="../architecture/#messages">PubSubMessages</a> over the Pulsar topics.</p>
<p>With the Pulsar implementation, it is also possible to shard the Web Service by having each Web Service specify a different topic to read results from. Additionally, you may specify a different topic for each Web Service to write queries to, but this is optional as there is only one Backend reading queries.</p>
<h2 id="setup">Setup</h2>
<p>Before using Bullet Pulsar, you will need to first set up a Pulsar cluster. To do so, follow the <a href="https://pulsar.apache.org/docs/en/standalone/">instructions here</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a quick setup, Pulsar topics can be automatically created</p>
</div>
<h3 id="plug-into-the-backend">Plug into the Backend</h3>
<p>Depending on how your Backend is built, you will need to either add Bullet Pulsar to your classpath or include it in your build tool. Get the artifact on our <a href="../../releases/#bullet-pulsar">releases page</a>.</p>
<p>Note, if you're adding Bullet Pulsar to the classpath instead of building a fat jar, you will need to get the jar with the classifier <code>fat</code> since you will need Bullet Pulsar with all of its dependencies.</p>
<p>Configure the Backend to use the Pulsar PubSub:</p>
<pre><code class="yaml">bullet.pubsub.context.name: &quot;QUERY_PROCESSING&quot;
bullet.pubsub.class.name: &quot;com.yahoo.bullet.pulsar.PulsarPubSub&quot;
bullet.pubsub.pulsar.client.serviceUrl: &quot;pulsar://your-service-url&quot;
bullet.pubsub.pulsar.consumer.subscriptionName: &quot;your-subscription-name&quot;\
bullet.pubsub.pulsar.response.topic.names: [&quot;persistent://sample/ns1/your-query-topic&quot;]
</code></pre>

<p>You will also need to configure the Pulsar Client, Producer, and Consumer properties used by the PubSub Publishers and Subscribers.</p>
<p>See the <a href="https://github.com/bullet-db/bullet-pulsar/blob/master/src/main/resources/bullet_pulsar_defaults.yaml">default configuration file</a> for complete configuration details.</p>
<h3 id="plug-into-the-web-service">Plug into the Web Service</h3>
<p>You will need to head over to our <a href="../../releases/#bullet-pulsar">releases page</a> and get the JAR artifact with the <code>fat</code> classifier. You can download the artifact for the 0.1.0 release <a href="https://bintray.com/yahoo/maven/bullet-pulsar/0.1.0">directly from JCenter</a>).</p>
<p>You should then plug in this JAR to your Web Service following the instructions <a href="../../ws/setup/#launch">here</a>.</p>
<p>For configuration, you should <a href="../../ws/setup/#pubsub-configuration">follow the steps here</a> to create and provide a YAML file to the Web Service. Remember to set the context to <code>QUERY_SUBMISSION</code>.</p>
<pre><code class="yaml">bullet.pubsub.context.name: &quot;QUERY_SUBMISSION&quot;
bullet.pubsub.class.name: &quot;com.yahoo.bullet.pulsar.PulsarPubSub&quot;
bullet.pubsub.pulsar.client.serviceUrl: &quot;pulsar://your-service-url&quot;
bullet.pubsub.pulsar.consumer.subscriptionName: &quot;your-subscription-name&quot;
bullet.pubsub.pulsar.request.topic.name: &quot;persistent://sample/ns1/your-query-topic&quot;
bullet.pubsub.pulsar.response.topic.name: &quot;persistent://sample/ns1/your-response-topic&quot;
</code></pre>

<p>As with the Backend, you will need to configure the Pulsar Client, Producer, and Consumer properties used by the PubSub Publishers and Subscribers.</p>
<p>See the <a href="https://github.com/bullet-db/bullet-pulsar/blob/master/src/main/resources/bullet_pulsar_defaults.yaml">default configuration file</a> for complete configuration details.</p>
<p>Remember that your Subscribers in the Backend are reading what the Producers in your Web Service are producing and vice-versa, so make sure to match up topics and settings accordingly.</p>
<h2 id="passthrough-configuration">Passthrough configuration</h2>
<p>You can configure the Pulsar Client, Producer, or Consumer properties for the PubSub Publishers and Subscribers by prefixing them with either <code>bullet.pubsub.pulsar.client.</code>, <code>bullet.pubsub.pulsar.producer.</code>, or <code>bullet.pubsub.pulsar.consumer.</code> respectively. The PubSub configuration sets a few of its own defaults but otherwise uses the default Pulsar settings.</p>
<p>See the <a href="https://github.com/bullet-db/bullet-pulsar/blob/master/src/main/resources/bullet_pulsar_defaults.yaml">default configuration file</a> for complete configuration details with their defaults.</p>
<h2 id="security">Security</h2>
<p>Pulsar supports Athenz Authentication and TLS, and Bullet Pulsar can be configured to use these. For complete details, see the <a href="http://pulsar.apache.org/docs/en/security-overview/">Pulsar documentation</a>.</p>
<pre><code class="yaml"># Note, these properties are not prefixed by &quot;bullet.pubsub.pulsar.client.&quot;
bullet.pubsub.pulsar.auth.enable: true
bullet.pubsub.pulsar.auth.plugin.class.name: &quot;org.apache.pulsar.client.impl.auth.AuthenticationAthenz&quot;
bullet.pubsub.pulsar.auth.params.string: '{&quot;tenantDomain&quot;:&quot;your_domain&quot;,&quot;tenantService&quot;:&quot;your_app&quot;,&quot;providerDomain&quot;:&quot;pulsar&quot;,&quot;privateKey&quot;:&quot;file:///path/to/private.pem&quot;,&quot;keyId&quot;:&quot;v1&quot;}'
</code></pre>

<pre><code class="yaml"># Enable TLS
bullet.pubsub.pulsar.client.useTls: true
bullet.pubsub.pulsar.client.tlsAllowInsecureConnection: false
bullet.pubsub.pulsar.client.tlsTrustCertsFilePath: &quot;/path/to/cacert.pem&quot;
</code></pre></div>
        
    </div>

    <footer class="col-md-12" >
        <hr />
        <div class="pull-left col-md-6">
            
            
        </div>
        <div class="pull-right col-md-4 text-right">
            <p>
            <small>Bullet is licensed under the <a href='https://github.com/bullet-db/bullet-core/blob/master/LICENSE'>Apache 2 license</a>.<br></small>
            
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
        </div>
    </footer>

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../..';
    </script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
    <script src="../../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
